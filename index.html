<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spelling Bee Master - éœé»˜æ‹¼å¯«ç·´ç¿’</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #FFC107;
            --success-color: #2ECC71;
            --error-color: #E74C3C;
            --bg-color: #F0F4F8;
            --card-bg: #FFFFFF;
            --text-main: #2C3E50;
            --text-light: #7F8C8D;
        }

        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 600px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }

        /* Header & Progress */
        .header {
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.3);
            width: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--secondary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Game Area */
        .game-area {
            padding: 30px;
            text-align: center;
        }

        .meaning-display {
            font-size: 1.5rem;
            color: var(--text-main);
            margin-bottom: 20px;
            font-weight: bold;
            min-height: 60px;
        }

        .syllable-hint {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            min-height: 30px;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        .input-group {
            margin-bottom: 25px;
            position: relative;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            font-size: 1.5rem;
            border: 3px solid #ddd;
            border-radius: 12px;
            text-align: center;
            transition: border-color 0.3s;
            outline: none;
            text-transform: lowercase;
        }

        input[type="text"]:focus {
            border-color: var(--primary-color);
        }

        input[type="text"].error {
            border-color: var(--error-color);
            animation: shake 0.5s;
        }

        input[type="text"].success {
            border-color: var(--success-color);
            background-color: #e8f8f5;
        }

        input[type="text"]:disabled {
            background-color: #eee;
            cursor: not-allowed;
        }

        /* Buttons */
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .btn {
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.1s, opacity 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-hint {
            background-color: #95a5a6;
            color: white;
        }

        .btn-check {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-next {
            background-color: var(--success-color);
            color: white;
            grid-column: span 2;
            display: none; /* Hidden initially */
        }

        /* Footer Info */
        .footer {
            padding: 15px;
            background: #f8f9fa;
            text-align: center;
            color: var(--text-light);
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        /* Start Screen Overlay */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .overlay h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .overlay p {
            color: var(--text-light);
            margin-bottom: 30px;
            max-width: 80%;
            text-align: center;
        }

        .start-btn {
            padding: 15px 40px;
            font-size: 1.5rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        /* Confetti (Simple CSS implementation) */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
            top: -10px;
            z-index: 5;
        }

        @keyframes fall {
            to { transform: translateY(600px) rotate(720deg); }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div id="scoreDisplay">åˆ†æ•¸: 0</div>
        <div id="progressDisplay">1 / 75</div>
    </div>
    <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
    </div>

    <div class="game-area">
        <div class="meaning-display" id="meaningDisplay">æº–å‚™é–‹å§‹...</div>
        
        <div class="syllable-hint" id="syllableDisplay"></div>

        <div class="input-group">
            <input type="text" id="wordInput" placeholder="åœ¨æ­¤è¼¸å…¥å–®å­—..." autocomplete="off">
        </div>

        <div class="controls">
            <button class="btn btn-hint" onclick="showHint()">ğŸ’¡ æç¤º (Hint)</button>
            <button class="btn btn-check" id="checkBtn" onclick="checkAnswer()">âœ… æª¢æŸ¥ (Check)</button>
            <button class="btn btn-next" id="nextBtn" onclick="nextWord()">â¡ ä¸‹ä¸€é¡Œ (Next)</button>
        </div>
    </div>

    <div class="footer">
        Spelling Bee ç·´ç¿’æ¨¡å¼
    </div>

    <div class="overlay" id="startScreen">
        <h1>ğŸ“ Spelling Master (éœé»˜æ¨¡å¼)</h1>
        <p>æ­¡è¿ä¾†åˆ°éœé»˜æ¨¡å¼ï¼<br>è«‹çœ‹ä¸­æ–‡è§£é‡‹ï¼Œä½¿ç”¨æç¤ºï¼Œç„¶å¾Œè¼¸å…¥æ­£ç¢ºçš„è‹±æ–‡å–®å­—ã€‚</p>
        <button class="start-btn" onclick="startGame()">é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <div class="overlay" id="endScreen" style="display: none;">
        <h1>æŒ‘æˆ°å®Œæˆï¼ğŸ‰</h1>
        <p id="finalScore">ä½ çš„æœ€çµ‚åˆ†æ•¸æ˜¯: 0</p>
        <button class="start-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
    </div>
</div>

<script>
    // è³‡æ–™ä¾†æºï¼šåŒ…å«å–®å­—ã€éŸ³ç¯€å’Œä¸­æ–‡è§£é‡‹çš„é™£åˆ—
    const wordData = [
        { word: "survey", syllables: ["sur", "vey"], meaning: "èª¿æŸ¥" },
        { word: "passenger", syllables: ["pas", "sen", "ger"], meaning: "ä¹˜å®¢" },
        { word: "airline", syllables: ["air", "line"], meaning: "èˆªç©ºå…¬å¸" },
        { word: "Singapore", syllables: ["Sin", "ga", "pore"], meaning: "æ–°åŠ å¡" },
        { word: "destination", syllables: ["des", "ti", "na", "tion"], meaning: "ç›®çš„åœ°" },
        { word: "personal particulars/ details", syllables: ["per", "so", "nal", " ", "par", "ti", "cu", "lars"], meaning: "å€‹äººè³‡æ–™" },
        { word: "nationality", syllables: ["na", "tion", "al", "i", "ty"], meaning: "åœ‹ç±" },
        { word: "residence", syllables: ["res", "i", "dence"], meaning: "ä½æ‰€/å±…ç•™åœ°" },
        { word: "British", syllables: ["Brit", "ish"], meaning: "è‹±åœ‹çš„/è‹±åœ‹äºº" },
        { word: "Thailand", syllables: ["Thai", "land"], meaning: "æ³°åœ‹" },
        { word: "occupation", syllables: ["oc", "cu", "pa", "tion"], meaning: "è·æ¥­" },
        { word: "legal", syllables: ["le", "gal"], meaning: "æ³•å¾‹çš„/åˆæ³•çš„" },
        { word: "journalism", syllables: ["jour", "nal", "ism"], meaning: "æ–°èæ¥­/æ–°èå­¸" },
        { word: "government", syllables: ["gov", "ern", "ment"], meaning: "æ”¿åºœ" },
        { word: "Bangkok", syllables: ["Bang", "kok"], meaning: "æ›¼è°·" },
        { word: "leave", syllables: ["leave"], meaning: "é›¢é–‹/ä¼‘å‡" },
        { word: "on time", syllables: ["on", " ", "time"], meaning: "æº–æ™‚" },
        { word: "reputation", syllables: ["rep", "u", "ta", "tion"], meaning: "åè­½/è²è­½" },
        { word: "choices", syllables: ["choic", "es"], meaning: "é¸æ“‡" },
        { word: "Bear in mind", syllables: ["Bear", " ", "in", " ", "mind"], meaning: "è¨˜ä½/ç‰¢è¨˜" },
        { word: "perhaps", syllables: ["per", "haps"], meaning: "æˆ–è¨±/å¯èƒ½" },
        { word: "important", syllables: ["im", "por", "tant"], meaning: "é‡è¦çš„" },
        { word: "achieve", syllables: ["a", "chieve"], meaning: "é”æˆ/å¯¦ç¾" },
        { word: "disorganized", syllables: ["dis", "or", "gan", "ized"], meaning: "é›œäº‚ç„¡ç« çš„" },
        { word: "crazy", syllables: ["cra", "zy"], meaning: "ç˜‹ç‹‚çš„" },
        { word: "encourage", syllables: ["en", "cour", "age"], meaning: "é¼“å‹µ" },
        { word: "noisy", syllables: ["nois", "y"], meaning: "å˜ˆé›œçš„/åµé¬§çš„" },
        { word: "location", syllables: ["lo", "ca", "tion"], meaning: "åœ°é»/ä½ç½®" },
        { word: "concentrate", syllables: ["con", "cen", "trate"], meaning: "é›†ä¸­ç²¾ç¥/å°ˆå¿ƒ" },
        { word: "professor", syllables: ["pro", "fes", "sor"], meaning: "æ•™æˆ" },
        { word: "surprising", syllables: ["sur", "pris", "ing"], meaning: "ä»¤äººé©šè¨çš„" },
        { word: "gimmicks", syllables: ["gim", "micks"], meaning: "èŠ±æ‹›/å™±é ­" },
        { word: "lecture", syllables: ["lec", "ture"], meaning: "æ¼”è¬›/è¬›èª²" },
        { word: "communist", syllables: ["com", "mu", "nist"], meaning: "å…±ç”¢ä¸»ç¾©è€…" },
        { word: "attract", syllables: ["at", "tract"], meaning: "å¸å¼•" },
        { word: "aid", syllables: ["aid"], meaning: "å¹«åŠ©/æ´åŠ©" },
        { word: "improve", syllables: ["im", "prove"], meaning: "æ”¹å–„/æé«˜" },
        { word: "command", syllables: ["com", "mand"], meaning: "å‘½ä»¤/æŒ‡æ®" },
        { word: "Bureau", syllables: ["Bu", "reau"], meaning: "å±€" },
        { word: "godfather", syllables: ["god", "fa", "ther"], meaning: "æ•™çˆ¶" },
        { word: "subtitle", syllables: ["sub", "ti", "tle"], meaning: "å­—å¹•" },
        { word: "sweeping", syllables: ["sweep", "ing"], meaning: "å…¨é¢çš„/å»£æ³›çš„" },
        { word: "represent", syllables: ["rep", "re", "sent"], meaning: "ä»£è¡¨" },
        { word: "academic", syllables: ["ac", "a", "dem", "ic"], meaning: "å­¸è¡“çš„" },
        { word: "technique", syllables: ["tech", "nique"], meaning: "æŠ€è¡“/æŠ€æ³•" },
        { word: "invented", syllables: ["in", "vent", "ed"], meaning: "ç™¼æ˜çš„" },
        { word: "empire", syllables: ["em", "pire"], meaning: "å¸åœ‹" },
        { word: "suitable for", syllables: ["suit", "a", "ble", " ", "for"], meaning: "é©åˆ" },
        { word: "title", syllables: ["ti", "tle"], meaning: "æ¨™é¡Œ/é ­éŠœ" },
        { word: "dinosaurs", syllables: ["di", "no", "saurs"], meaning: "æé¾" },
        { word: "serves as", syllables: ["serves", " ", "as"], meaning: "å……ç•¶/ä½œç‚º" },
        { word: "clever tricks", syllables: ["clev", "er", " ", "tricks"], meaning: "è°æ˜çš„è©­è¨ˆ/èŠ±æ‹›" },
        { word: "mentioned", syllables: ["men", "tioned"], meaning: "æåˆ°/æåŠ" },
        { word: "worth", syllables: ["worth"], meaning: "åƒ¹å€¼" },
        { word: "cope with", syllables: ["cope", " ", "with"], meaning: "æ‡‰å°/è™•ç†" },
        { word: "made in", syllables: ["made", " ", "in"], meaning: "è£½é€ æ–¼" },
        { word: "neighbourhood", syllables: ["neigh", "bour", "hood"], meaning: "é„°é‡Œ/è¡—å€" },
        { word: "video", syllables: ["vid", "e", "o"], meaning: "å½±ç‰‡/éŒ„åƒ" },
        { word: "comments", syllables: ["com", "ments"], meaning: "è©•è«–/æ„è¦‹" },
        { word: "consider", syllables: ["con", "sid", "er"], meaning: "è€ƒæ…®/èªç‚º" },
        { word: "hunters", syllables: ["hunt", "ers"], meaning: "çµäºº" },
        { word: "roam", syllables: ["roam"], meaning: "æ¼«éŠ/éŠè•©" },
        { word: "bellow", syllables: ["bel", "low"], meaning: "å¼å«/å’†å“®" },
        { word: "afterwards", syllables: ["af", "ter", "wards"], meaning: "ä¹‹å¾Œ/å¾Œä¾†" },
        { word: "amazed", syllables: ["a", "mazed"], meaning: "é©šè¨çš„/é©šå¥‡çš„" },
        { word: "Disney", syllables: ["Dis", "ney"], meaning: "è¿ªå£«å°¼" },
        { word: "pre-schoolers", syllables: ["pre", "-", "school", "ers"], meaning: "å­¸é½¡å‰å…’ç«¥" },
        { word: "fawn", syllables: ["fawn"], meaning: "å¹¼é¹¿/å¥‰æ‰¿" },
        { word: "gentle", syllables: ["gen", "tle"], meaning: "æº«å’Œçš„/è¼•æŸ”çš„" },
        { word: "survive", syllables: ["sur", "vive"], meaning: "ç”Ÿå­˜/å­˜æ´»" },
        { word: "grow up", syllables: ["grow", " ", "up"], meaning: "æˆé•·/é•·å¤§" },
        { word: "delighted", syllables: ["de", "light", "ed"], meaning: "é«˜èˆˆçš„/æ­¡å–œçš„" },
        { word: "well-loved music", syllables: ["well", "-", "loved", " ", "mu", "sic"], meaning: "å—æ­¡è¿çš„éŸ³æ¨‚" },
        { word: "incredible", syllables: ["in", "cred", "i", "ble"], meaning: "é›£ä»¥ç½®ä¿¡çš„/é©šäººçš„" }
    ];

    // Game State
    let currentIndex = 0;
    let score = 0;
    let currentWordObj = null;
    let hintLevel = 0; // 0: no hint, 1+: reveal syllables

    // DOM Elements
    const meaningDisplay = document.getElementById('meaningDisplay');
    const syllableDisplay = document.getElementById('syllableDisplay');
    const wordInput = document.getElementById('wordInput');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const progressDisplay = document.getElementById('progressDisplay');
    const progressBar = document.getElementById('progressBar');
    const checkBtn = document.getElementById('checkBtn');
    const nextBtn = document.getElementById('nextBtn');
    const startScreen = document.getElementById('startScreen');

    function startGame() {
        startScreen.style.display = 'none';
        currentIndex = 0;
        score = 0;
        updateScore();
        // æ´—ç‰Œ (å¯é¸ï¼Œå¦‚æœæƒ³éš¨æ©Ÿå‡ºé¡Œï¼Œè«‹å–æ¶ˆä¸‹é¢é€™è¡Œçš„è¨»è§£)
        // shuffleArray(wordData); 
        loadWord(currentIndex);
    }

    function loadWord(index) {
        if (index >= wordData.length) {
            endGame();
            return;
        }

        currentWordObj = wordData[index];
        hintLevel = 0;
        
        // Reset UI
        meaningDisplay.textContent = currentWordObj.meaning;
        meaningDisplay.style.color = 'var(--text-main)';
        syllableDisplay.textContent = ""; 
        wordInput.value = "";
        wordInput.classList.remove('error', 'success');
        wordInput.disabled = false;
        
        checkBtn.style.display = 'inline-block';
        nextBtn.style.display = 'none';
        
        // Update Progress
        progressDisplay.textContent = `${index + 1} / ${wordData.length}`;
        const pct = ((index + 1) / wordData.length) * 100;
        progressBar.style.width = `${pct}%`;

        // Focus input
        setTimeout(() => {
            wordInput.focus();
            // èªéŸ³æœ—è®€åŠŸèƒ½å·²ç§»é™¤
        }, 500);
    }

    function showHint() {
        if (!currentWordObj) return;
        
        const syllables = currentWordObj.syllables;
        hintLevel++;
        
        // é€æ¼¸é¡¯ç¤ºéŸ³ç¯€ä½œç‚ºæç¤º
        let hintText = "";
        
        if (hintLevel >= syllables.length) {
            // é¡¯ç¤ºå®Œæ•´çš„éŸ³ç¯€æ ¼å¼
            hintText = syllables.join(" - ").toUpperCase();
        } else {
            // é¡¯ç¤ºå·²æç¤ºçš„éŸ³ç¯€ + æœªçŸ¥éŸ³ç¯€çš„ä¸‹åŠƒç·š
            hintText = syllables.map((syl, idx) => {
                if (idx < hintLevel) return syl.toUpperCase();
                return "_".repeat(syl.length);
            }).join(" - ");
        }
        
        syllableDisplay.textContent = hintText;
        wordInput.focus();
    }

    function checkAnswer() {
        const userVal = wordInput.value.trim().toLowerCase();
        const correctVal = currentWordObj.word.toLowerCase();

        if (userVal === correctVal) {
            handleSuccess();
        } else {
            handleError();
        }
    }

    function handleSuccess() {
        wordInput.classList.add('success');
        wordInput.disabled = true;
        meaningDisplay.textContent = "âœ… Correct! ç­”å°äº†ï¼";
        meaningDisplay.style.color = 'var(--success-color)';
        syllableDisplay.textContent = currentWordObj.word.toUpperCase();
        
        // åŠ åˆ†é‚è¼¯ (ä½¿ç”¨æç¤ºæœƒæ¸›åˆ†)
        let points = 10;
        if (hintLevel > 0) points = 5;
        score += points;
        updateScore();

        // æ…¶ç¥å‹•ç•«
        createConfetti();
        
        checkBtn.style.display = 'none';
        nextBtn.style.display = 'inline-block';
        nextBtn.focus();
    }

    // éŒ¯èª¤è™•ç†ï¼šé¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆä¸¦è·³åˆ°ä¸‹ä¸€é¡Œ
    function handleError() {
        wordInput.classList.add('error');
        wordInput.disabled = true; // é–å®šè¼¸å…¥æ¡†
        checkBtn.style.display = 'none'; // éš±è—æª¢æŸ¥æŒ‰éˆ•

        // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
        meaningDisplay.textContent = `âŒ éŒ¯èª¤! æ­£ç¢ºç­”æ¡ˆæ˜¯: ${currentWordObj.word.toUpperCase()}`;
        meaningDisplay.style.color = 'var(--error-color)';
        
        // é¡¯ç¤ºéŸ³ç¯€è¼”åŠ©è¨˜æ†¶
        syllableDisplay.textContent = currentWordObj.syllables.join(" - ").toUpperCase();

        // é¡¯ç¤ºä¸‹ä¸€é¡ŒæŒ‰éˆ•
        nextBtn.style.display = 'inline-block';
        nextBtn.focus();
    }

    function nextWord() {
        currentIndex++;
        loadWord(currentIndex);
    }

    function updateScore() {
        scoreDisplay.textContent = `åˆ†æ•¸: ${score}`;
    }

    function endGame() {
        document.getElementById('endScreen').style.display = 'flex';
        document.getElementById('finalScore').textContent = `ä½ çš„æœ€çµ‚åˆ†æ•¸æ˜¯: ${score}`;
    }

    // Enter key support
    wordInput.addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            if (nextBtn.style.display !== 'none') {
                nextWord();
            } else {
                checkAnswer();
            }
        }
    });

    // Confetti Effect Helper
    function createConfetti() {
        const colors = ['#e74c3c', '#3498db', '#f1c40f', '#2ecc71', '#9b59b6'];
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDuration = (Math.random() * 2 + 1) + 's';
            document.body.appendChild(confetti);
            
            // Cleanup
            setTimeout(() => {
                confetti.remove();
            }, 3000);
        }
    }

    // Fisher-Yates Shuffle (æ´—ç‰Œå‡½å¼ - æœªä½¿ç”¨ä½†ä¿ç•™)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
</script>

</body>
</html>
